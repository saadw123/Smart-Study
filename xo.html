<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script>
        // **Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù…Ù†Ø¹ Ø§Ù„ÙˆÙ…ÙŠØ¶ (Anti-FOUC) - ÙŠØ¬Ø¨ ÙˆØ¶Ø¹Ù‡ ÙƒØ£ÙˆÙ„ Ø´ÙŠØ¡ Ø¯Ø§Ø®Ù„ <head>**
        (function() {
            const theme = localStorage.getItem('theme');
            // Ù†Ø·Ø¨Ù‚ Ø§Ù„ÙƒÙ„Ø§Ø³ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù„Ù‰ Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø°Ø± <html>
            if (theme === 'dark') {
                document.documentElement.classList.add('dark-mode'); 
            } else {
                document.documentElement.classList.remove('dark-mode');
            }
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙŠÙƒ ØªØ§Ùƒ ØªÙˆ (XO)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        .xo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
        }

        #status-message {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--color-primary);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 5px;
            margin-bottom: 20px;
            /* === (ØªØ«Ø¨ÙŠØª Ù„ÙˆÙ† Ø§Ù„ÙÙˆØ§ØµÙ„ Ù„ÙŠÙƒÙˆÙ† Ø£Ø¨ÙŠØ¶ Ù…Ø±Ø¦ÙŠ ÙÙŠ ÙƒÙ„ Ø§Ù„Ø£ÙˆØ¶Ø§Ø¹) === */
            background-color: #475569; 
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        body.dark-mode .board {
            /* === (Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ 2: Ù†Ø¹ÙŠØ¯ Ø§Ù„ÙÙˆØ§ØµÙ„ Ù„ØªÙƒÙˆÙ† Ø±Ù…Ø§Ø¯ÙŠØ© ÙØ§ØªØ­Ø© ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†) === */
            background-color: #64748b; /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„ÙˆÙ† Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ Ù„ÙŠÙƒÙˆÙ† Ù…Ø±Ø¦ÙŠÙ‹Ø§ */
        }

        .cell {
            /* Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙŠØ© Ù†ÙØ³Ù‡Ø§ */
            background-color: var(--bg-secondary); 
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            font-weight: 900;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.1s;
            /* === (Ø¥Ø¶Ø§ÙØ© Ø®Ø· Ø­ÙˆÙ„ Ø§Ù„Ø®Ù„ÙŠØ© ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ Ù„Ø¶Ù…Ø§Ù† Ø±Ø¤ÙŠØªÙ‡Ø§) === */
            border: 1px solid #e2e8f0; 
        }

        /* (ØªØ¹Ø¯ÙŠÙ„ ØµØºÙŠØ± Ø¥Ø¶Ø§ÙÙŠ) */
        body.dark-mode .cell {
            /* Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙŠØ© Ù†ÙØ³Ù‡Ø§ Ø¯Ø§ÙƒÙ† Ù„ØªÙ…ÙŠÙŠØ²Ù‡Ø§ Ø¹Ù† Ø§Ù„ÙÙˆØ§ØµÙ„ */
            background-color: var(--dark-bg-primary); 
            color: var(--dark-text-primary); 
            border-color: #334155; /* Ø­Ø¯ÙˆØ¯ Ø£ØºÙ…Ù‚ */
        }

        .cell:hover:empty {
            background-color: var(--bg-primary);
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø®Ø§Ø³Ø±/Ø§Ù„ÙØ§Ø¦Ø² */
        .winner {
            background-color: var(--color-accent) !important;
            color: white;
        }
        .draw {
            background-color: #f59e0b !important;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© */
        #restart-btn {
            background-color: #ef4444;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
        }

        body.dark-mode .board {
            /* Ù„ÙˆÙ† Ø§Ù„ÙÙˆØ§ØµÙ„ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†: Ù†Ø¬Ø¹Ù„Ù‡Ø§ Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ Ù„ÙƒÙŠ Ù†Ø±Ø§Ù‡Ø§ Ø¹Ù„Ù‰ Ø®Ù„ÙÙŠØ© Ø£ØºÙ…Ù‚ */
            background-color: #475569; 
        }
    </style>
</head>
<body class="light-mode">

    <header class="main-header">
        <div class="container header-content">
            
            <div class="logo-and-nav">
                <a href="index.html" class="logo-container">
                    <span class="logo-badge">Smart Study ğŸ§ </span>
                </a>
                
                
            </div>

            <section class="notebook-header-display">
                 <nav class="main-nav-center">
                    <a href="notebook.html" class="nav-link-pill">Ø§Ù„ÙƒØ±Ø§Ø³Ø©</a>
                    <a href="games.html" class="nav-link-pill">Ø§Ù„ØªØ³Ù„ÙŠØ©</a>
                </nav>
            </section>

            <div class="header-controls">
                <button id="ai-toggle-header" class="icon-button" aria-label="ØªØ´ØºÙŠÙ„ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ">
                    <i class="fas fa-brain"></i>
                </button>
                <button id="dark-mode-toggle" class="icon-button" aria-label="ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†">
                    <i class="fas fa-moon"></i>
                </button>

                <button id="logout-button" class="icon-button" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container xo-container">
        
        <header class="page-title-header">
            <h1><i class="fas fa-times-circle"></i> ØªÙŠÙƒ ØªØ§Ùƒ ØªÙˆ (XO)</h1>
        </header>

        <div id="status-message">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ (Ø£Ù†Øª X)</div>

        <div class="board" id="board">
            <div class="cell" data-index="0"></div>
            <div class="cell" data-index="1"></div>
            <div class="cell" data-index="2"></div>
            <div class="cell" data-index="3"></div>
            <div class="cell" data-index="4"></div>
            <div class="cell" data-index="5"></div>
            <div class="cell" data-index="6"></div>
            <div class="cell" data-index="7"></div>
            <div class="cell" data-index="8"></div>
        </div>

        <button id="restart-btn" class="cta-button secondary">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>

    </main>

    <script src="script.js"></script>
    <script src="xo.js"></script>

</body>
</html>